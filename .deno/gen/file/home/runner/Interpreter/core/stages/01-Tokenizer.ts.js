import { TokenType, Keyword } from "@constants";
import InterpreterError from "@errors";
export class Token {
    type;
    value;
    constructor(type, value) {
        this.type = type;
        this.value = value;
    }
}
export class Tokenizer {
    returns = new Array();
    source;
    pushToken(...args) {
        this.returns.push(new Token(...args));
    }
    constructor(code) {
        this.source = code.split('');
        const binaryOp = /[!=<>*/%+-]/;
        const whitespace = /[\s\t\n]/;
        const numbers = /[0-9]/;
        const letters = /[a-z]/i;
        while (this.source.length > 0) {
            if (['(', ')'].includes(this.source[0])) {
                this.pushToken(TokenType.Paren, this.source.shift());
            }
            else if (this.source[0] === '"') {
                let value = '';
                this.source.shift();
                while (this.source[0] !== '"') {
                    value += this.source.shift();
                }
                this.source.shift();
                this.pushToken(TokenType.String, value);
            }
            else if (this.source[0] === '=' && this.source[1] !== '=') {
                this.pushToken(TokenType.Equals, this.source.shift());
            }
            else if (binaryOp.test(this.source[0])) {
                let value = '';
                while (binaryOp.test(this.source[0])) {
                    value += this.source.shift();
                }
                this.pushToken(TokenType.BinaryOperator, value);
            }
            else if (numbers.test(this.source[0])) {
                let value = '';
                while (numbers.test(this.source[0])) {
                    value += this.source.shift();
                }
                this.pushToken(TokenType.Number, value);
            }
            else if (letters.test(this.source[0])) {
                let ident = "";
                while (this.source.length > 0 && letters.test(this.source[0])) {
                    ident += this.source.shift();
                }
                const reserved = Keyword.find(v => v === ident);
                if (reserved) {
                    if (['true', 'false'].includes(ident)) {
                        this.pushToken(TokenType.Boolean, ident);
                    }
                    else {
                        this.pushToken(TokenType.Keyword, ident);
                    }
                }
                else {
                    this.pushToken(TokenType.Identifier, ident);
                }
            }
            else if (whitespace.test(this.source[0])) {
                this.source.shift();
            }
            else {
                throw new InterpreterError("UnexpectedCharacterError", this.source[0]);
            }
        }
        this.pushToken(TokenType.EOF, 'End of File');
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMDEtVG9rZW5pemVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiMDEtVG9rZW5pemVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLE1BQU0sWUFBWSxDQUFDO0FBQ2hELE9BQU8sZ0JBQWdCLE1BQU0sU0FBUyxDQUFDO0FBRXZDLE1BQU0sT0FBTyxLQUFLO0lBQ2QsSUFBSSxDQUFXO0lBQ2YsS0FBSyxDQUFRO0lBRWIsWUFBWSxJQUFlLEVBQUUsS0FBVTtRQUNuQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztJQUN2QixDQUFDO0NBQ0o7QUFFRCxNQUFNLE9BQU8sU0FBUztJQUNsQixPQUFPLEdBQUcsSUFBSSxLQUFLLEVBQVMsQ0FBQztJQUNyQixNQUFNLENBQWdCO0lBRXRCLFNBQVMsQ0FBQyxHQUFHLElBQXlDO1FBQzFELElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksS0FBSyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBRUQsWUFBWSxJQUFZO1FBQ3BCLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUU3QixNQUFNLFFBQVEsR0FBRyxhQUFhLENBQUM7UUFDL0IsTUFBTSxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQzlCLE1BQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQztRQUN4QixNQUFNLE9BQU8sR0FBRyxRQUFRLENBQUM7UUFFekIsT0FBTSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDMUIsSUFBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUNwQyxJQUFJLENBQUMs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QUMsQ0FBQztxQkFDNUM7aUJBQ2hCO3FCQUFNO29CQUNOLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLFVBQVUsRUFBRSxLQUFLLENBQUMsQ0FBQztpQkFDNUM7YUFDUTtpQkFDSSxJQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUNyQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO2FBQ3ZCO2lCQUNJO2dCQUNELE1BQU0sSUFBSSxnQkFBZ0IsQ0FBQywwQkFBMEIsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDMUU7U0FDSjtRQUVELElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxhQUFhLENBQUMsQ0FBQztJQUNqRCxDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUb2tlblR5cGUsIEtleXdvcmQgfSBmcm9tIFwiQGNvbnN0YW50c1wiO1xuaW1wb3J0IEludGVycHJldGVyRXJyb3IgZnJvbSBcIkBlcnJvcnNcIjtcblxuZXhwb3J0IGNsYXNzIFRva2VuIHtcbiAgICB0eXBlOiBUb2tlblR5cGVcbiAgICB2YWx1ZTogc3RyaW5nXG5cbiAgICBjb25zdHJ1Y3Rvcih0eXBlOiBUb2tlblR5cGUsIHZhbHVlOiBhbnkpIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRva2VuaXplciB7XG4gICAgcmV0dXJucyA9IG5ldyBBcnJheTxUb2tlbj4oKTtcbiAgICBwcml2YXRlIHNvdXJjZTogQXJyYXk8c3RyaW5nPjtcblxuICAgIHByaXZhdGUgcHVzaFRva2VuKC4uLmFyZ3M6IENvbnN0cnVjdG9yUGFyYW1ldGVyczx0eXBlb2YgVG9rZW4+KSB7XG4gICAgICAgIHRoaXMucmV0dXJucy5wdXNoKG5ldyBUb2tlbiguLi5hcmdzKSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0cnVjdG9yKGNvZGU6IHN0cmluZykge1xuICAgICAgICB0aGlzLnNvdXJjZSA9IGNvZGUuc3BsaXQoJycpO1xuXG4gICAgICAgIGNvbnN0IGJpbmFyeU9wID0gL1shPTw+Ki8lKy1dLztcbiAgICAgICAgY29uc3Qgd2hpdGVzcGFjZSA9IC9bXFxzXFx0XFxuXS87XG4gICAgICAgIGNvbnN0IG51bWJlcnMgPSAvWzAtOV0vO1xuICAgICAgICBjb25zdCBsZXR0ZXJzID0gL1thLXpdL2k7XG5cbiAgICAgICAgd2hpbGUodGhpcy5zb3VyY2UubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYoWycoJywgJyknXS5pbmNsdWRlcyh0aGlzLnNvdXJjZVswXSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnB1c2hUb2tlbihUb2tlblR5cGUuUGFyZW4sIHRoaXMuc291cmNlLnNoaWZ0KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZih0aGlzLnNvdXJjZVswXSA9PT0gJ1wiJykge1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9ICcnO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zb3VyY2Uuc2hpZnQoKTtcblxuICAgICAgICAgICAgICAgIHdoaWxlICh0aGlzLnNvdXJjZVswXSAhPT0gJ1wiJykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSB0aGlzLnNvdXJjZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuc291cmNlLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5wdXNoVG9rZW4oVG9rZW5UeXBlLlN0cmluZywgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZih0aGlzLnNvdXJjZVswXSA9PT0gJz0nICYmIHRoaXMuc291cmNlWzFdICE9PSAnPScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnB1c2hUb2tlbihUb2tlblR5cGUuRXF1YWxzLCB0aGlzLnNvdXJjZS5zaGlmdCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYoYmluYXJ5T3AudGVzdCh0aGlzLnNvdXJjZVswXSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSAnJztcblxuICAgICAgICAgICAgICAgIHdoaWxlIChiaW5hcnlPcC50ZXN0KHRoaXMuc291cmNlWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSB0aGlzLnNvdXJjZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMucHVzaFRva2VuKFRva2VuVHlwZS5CaW5hcnlPcGVyYXRvciwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZihudW1iZXJzLnRlc3QodGhpcy5zb3VyY2VbMF0pKSB7XG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgd2hpbGUgKG51bWJlcnMudGVzdCh0aGlzLnNvdXJjZVswXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgKz0gdGhpcy5zb3VyY2Uuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICB9ICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5wdXNoVG9rZW4oVG9rZW5UeXBlLk51bWJlciwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZihsZXR0ZXJzLnRlc3QodGhpcy5zb3VyY2VbMF0pKSB7XG4gICAgICAgICAgICAgICAgbGV0IGlkZW50ID0gXCJcIjtcblx0XHRcdFx0d2hpbGUgKHRoaXMuc291cmNlLmxlbmd0aCA+IDAgJiYgbGV0dGVycy50ZXN0KHRoaXMuc291cmNlWzBdKSkge1xuXHRcdFx0XHRcdGlkZW50ICs9IHRoaXMuc291cmNlLnNoaWZ0KCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCByZXNlcnZlZCA9IEtleXdvcmQuZmluZCh2ID0+IHYgPT09IGlkZW50KTtcblxuXHRcdFx0XHRpZiAocmVzZXJ2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoWyd0cnVlJywgJ2ZhbHNlJ10uaW5jbHVkZXMoaWRlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnB1c2hUb2tlbihUb2tlblR5cGUuQm9vbGVhbiwgaWRlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wdXNoVG9rZW4oVG9rZW5UeXBlLktleXdvcmQsIGlkZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMucHVzaFRva2VuKFRva2VuVHlwZS5JZGVudGlmaWVyLCBpZGVudCk7XG5cdFx0XHRcdH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYod2hpdGVzcGFjZS50ZXN0KHRoaXMuc291cmNlWzBdKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc291cmNlLnNoaWZ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJwcmV0ZXJFcnJvcihcIlVuZXhwZWN0ZWRDaGFyYWN0ZXJFcnJvclwiLCB0aGlzLnNvdXJjZVswXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnB1c2hUb2tlbihUb2tlblR5cGUuRU9GLCAnRW5kIG9mIEZpbGUnKTtcbiAgICB9XG59Il19